<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½ çš„ç†è²¡äººæ ¼æ¸¬é©—ï¼šæ˜¯çµæ‰‹é‚„æ˜¯æ§ç®¡è€…ï¼Ÿ</title>
    <!-- ä½¿ç”¨ç³»çµ±å­—é«”å †ç–Šï¼Œæ»¿è¶³æ‰‹æ©Ÿèˆ‡æ¡Œé¢ç€è¦½å™¨çš„è¦æ±‚ -->
    <style>
        :root {
            /* å®šç¾©ä¸»è‰²èª¿ */
            --primary-color: #4f46e5; /* é›è—è‰² */
            --primary-dark: #4338ca;
            --background-color: #f3f4f6;
            --card-background: #ffffff;
            --text-color: #1f2937;
            --text-light: #6b7280;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        /* ä¸»è¦å®¹å™¨ RWD è¨­ç½® */
        .container {
            width: 100%;
            max-width: 100%;
            padding: 1rem;
        }
        
        @media (min-width: 768px) {
            .container {
                max-width: 600px; /* æ¡Œé¢ç½®ä¸­ï¼Œé™åˆ¶æœ€å¤§å¯¬åº¦ */
                padding: 2rem;
            }
        }

        /* å¡ç‰‡é€šç”¨æ¨£å¼ */
        .card {
            background-color: var(--card-background);
            border-radius: 16px;
            box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -2px var(--shadow-color);
            padding: 1.5rem;
            margin: 0 auto; /* ç½®ä¸­ */
        }
        
        @media (min-width: 768px) {
            .card {
                padding: 2.5rem;
            }
        }

        /* æ¨™ç±¤/éŒ¯èª¤è¨Šæ¯ */
        .label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-color);
            font-size: 1rem;
        }
        
        .error-message {
            color: #ef4444; /* ç´…è‰² */
            font-weight: 600;
            margin-top: 0.5rem;
            text-align: center;
        }

        /* ---------------------------------- */
        /* 1. è¼¸å…¥æ¡†æ¨£å¼ */
        /* ---------------------------------- */
        input[type="text"] {
            width: 100%;
            padding: 0.75rem;
            margin-bottom: 1.5rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box;
            transition: border-color 0.2s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
        }

        /* ---------------------------------- */
        /* 2. é¸é …æŒ‰éˆ•çµ„æ¨£å¼ */
        /* ---------------------------------- */
        .option-group {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .option-group-full button {
            width: 100%; /* æ‰‹æ©Ÿä¸Šé¸é …æŒ‰éˆ•ä½”æ»¿å…¨å¯¬ */
            height: auto; /* é«˜åº¦è‡ªé©æ‡‰ */
            min-height: 48px; /* æœ€å°é«˜åº¦ 48px */
            padding: 0.75rem 1rem;
        }

        /* ---------------------------------- */
        /* 3. æŒ‰éˆ•é€šç”¨æ¨£å¼ (Button) */
        /* ---------------------------------- */
        .btn {
            background-color: #e5e7eb; /* æ·ºç°è‰²é è¨­ */
            color: var(--text-color);
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 5px var(--shadow-color);
            user-select: none; /* é¿å…é¸ä¸­æ–‡å­— */
            min-height: 48px; /* ç¢ºä¿æ‰‹æ©Ÿå¥½æŒ‰ */
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: var(--card-background);
            box-shadow: 0 4px 8px rgba(79, 70, 229, 0.4);
        }

        .btn:hover:not([disabled]) {
            filter: brightness(1.05);
            transform: translateY(-1px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
        
        .btn:active:not([disabled]) {
            transform: scale(0.98); /* é»æ“Šç¸®æ”¾æ•ˆæœ */
            filter: brightness(0.9);
        }
        
        .btn[disabled] {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* ---------------------------------- */
        /* 4. é¸ä¸­æ¨£å¼ (Selected/Active) */
        /* ---------------------------------- */
        .btn-selected {
            background-color: var(--primary-color);
            color: var(--card-background);
            border: 2px solid var(--primary-dark);
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.2); /* é¡å¤–çš„å…‰ç’° */
        }

        .btn-option:not(.btn-selected) {
             background-color: #f9fafb; /* æ·ºè‰²é¸é …åº•è‰² */
             border: 1px solid #e5e7eb;
        }

        /* ---------------------------------- */
        /* 5. é¡Œç›®é ç‰¹å®šæ¨£å¼ */
        /* ---------------------------------- */
        .progress-bar {
            height: 10px;
            background-color: #e5e7eb;
            border-radius: 5px;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background-color: var(--primary-color);
            transition: width 0.5s ease-in-out;
            border-radius: 5px;
        }
        
        /* å…©å€‹æŒ‰éˆ•ä¸¦æ’æ™‚çš„é–“è· */
        .flex-buttons {
            display: flex;
            gap: 1rem;
        }
        /* è®“ Back æŒ‰éˆ•æ˜¯æ·ºè‰²çš„ */
        #back-button {
             background-color: #d1d5db;
        }

        /* ---------------------------------- */
        /* 6. çµæœé ç‰¹å®šæ¨£å¼ */
        /* ---------------------------------- */
        .result-code {
            font-size: 3rem;
            font-weight: 900;
            color: var(--primary-color);
            letter-spacing: 0.1em;
            margin-bottom: 0.5rem;
        }

        .result-name {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--text-color);
            margin-bottom: 0.5rem;
        }

        .result-tagline {
            display: inline-block;
            background-color: #fef3c7; /* æ·ºé»ƒè‰² */
            color: #d97706; /* æ·±é»ƒè‰² */
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .disclaimer {
            font-size: 0.75rem;
            color: var(--text-light);
            text-align: center;
            margin-top: 1.5rem;
        }

        /* ---------------------------------- */
        /* 7. è¨Šæ¯æç¤ºæ¡†æ¨£å¼ (Toast/Snackbar) */
        /* ---------------------------------- */
        #message-box {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #10b981; /* ç¶ è‰²ï¼ŒæˆåŠŸ */
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            /* æ‰‹æ©Ÿ RWD èª¿æ•´ */
            max-width: 90%; 
            text-wrap: balance;
        }

        .visible {
            opacity: 1 !important;
        }
        
        /* éš±è—ä¸æ´»èºçš„å€å¡Š */
        .hidden {
            display: none !important;
        }

        /* ---------------------------------- */
        /* 8. åˆ—å°åª’é«”æŸ¥è©¢ (PDF è¼¸å‡ºå„ªåŒ–) */
        /* ---------------------------------- */
        @media print {
            body {
                background-color: #ffffff; /* åˆ—å°èƒŒæ™¯ç‚ºç™½è‰² */
                display: block; /* ç§»é™¤ flex ä½ˆå±€ */
                min-height: auto;
                padding: 0;
                margin: 0;
            }
            .container {
                max-width: none;
                padding: 0;
            }
            .card {
                box-shadow: none; /* ç§»é™¤é™°å½± */
                border-radius: 0;
                padding: 1cm; /* è¨­å®šé‚Šè· */
            }
            /* éš±è—æ‰€æœ‰äº’å‹•å…ƒç´ å’Œä¸å¿…è¦çš„å…ƒç´  */
            #info-section, #quiz-section, .btn, .disclaimer, #message-box {
                display: none !important;
            }
            /* åªé¡¯ç¤ºçµæœé é¢ */
            #result-section {
                display: block !important;
                margin: 0;
                padding: 0;
            }
            /* ç¢ºä¿æ–‡å­—é¡è‰²ç‚ºé»‘è‰²ï¼Œä»¥ä¾¿åˆ—å° */
            .result-name, .text-left {
                color: #000000 !important;
            }
            /* ç¢ºä¿çµæœå€å¡Šçš„èƒŒæ™¯è‰²åœ¨åˆ—å°æ™‚ä¸æœƒå°è‡´å¢¨æ°´æµªè²»ï¼Œæ”¹ç‚ºé‚Šæ¡†å¼·èª¿ */
            .p-4 {
                background-color: #f7f7f7 !important; /* æ·ºç°è‰²èƒŒæ™¯ */
                -webkit-print-color-adjust: exact; /* ç¢ºä¿èƒŒæ™¯è‰²åˆ—å°å‡ºä¾† */
                print-color-adjust: exact;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        
        <!-- ---------------------------------------------------- -->
        <!-- éšæ®µ 1: åŸºæœ¬è³‡æ–™é  (User Info) -->
        <!-- ---------------------------------------------------- -->
        <section id="info-section" class="card">
            <h2 class="text-2xl font-bold mb-6 text-center" style="color: var(--primary-color);">
                ä¾†ï¼å…ˆäº¤å€‹åº•ï¼Œæˆ‘å€‘æ‰èƒ½é–‹å§‹å˜´ç ²ğŸ˜ˆ
            </h2>
            
            <!-- æ¬„ä½ 1: æœ¬å -->
            <div class="mb-4">
                <label for="user-name" class="label">ä½ çš„æœ¬åæ˜¯ï¼Ÿï¼ˆçœŸçš„æœ¬åï¼Œä¸è¦å¯«ã€Œå¸¥å“¥ã€ï¼‰</label>
                <input type="text" id="user-name" placeholder="ä¾‹å¦‚ï¼šæ—å† è±ª" required>
            </div>

            <!-- æ¬„ä½ 2: æ€§åˆ¥ (å…©é¸ä¸€) -->
            <div class="mb-4">
                <span class="label">æ€§åˆ¥</span>
                <div id="gender-group" class="option-group">
                    <button type="button" class="btn btn-option" data-value="ç”·" onclick="selectOption('gender', 'ç”·', this)">ç”·</button>
                    <button type="button" class="btn btn-option" data-value="å¥³" onclick="selectOption('gender', 'å¥³', this)">å¥³</button>
                </div>
            </div>

            <!-- æ¬„ä½ 3: å¹´é½¡ç¯„åœ (å¤šé¸ä¸€) -->
            <div class="mb-4">
                <span class="label">ä½ çš„å¹´é½¡ç¯„åœï¼Ÿ</span>
                <div id="age-group" class="option-group">
                    <button type="button" class="btn btn-option" data-value="20æ­²ä»¥ä¸‹" onclick="selectOption('age', '20æ­²ä»¥ä¸‹', this)">20æ­²ä»¥ä¸‹</button>
                    <button type="button" class="btn btn-option" data-value="20â€“24" onclick="selectOption('age', '20â€“24', this)">20â€“24</button>
                    <button type="button" class="btn btn-option" data-value="25â€“29" onclick="selectOption('age', '25â€“29', this)">25â€“29</button>
                    <button type="button" class="btn btn-option" data-value="30â€“34" onclick="selectOption('age', '30â€“34', this)">30â€“34</button>
                    <button type="button" class="btn btn-option" data-value="35â€“39" onclick="selectOption('age', '35â€“39', this)">35â€“39</button>
                    <button type="button" class="btn btn-option" data-value="40â€“44" onclick="selectOption('age', '40â€“44', this)">40â€“44</button>
                    <button type="button" class="btn btn-option" data-value="45â€“49" onclick="selectOption('age', '45â€“49', this)">45â€“49</button>
                    <button type="button" class="btn btn-option" data-value="50â€“54" onclick="selectOption('age', '50â€“54', this)">50â€“54</button>
                    <button type="button" class="btn btn-option" data-value="55â€“59" onclick="selectOption('age', '55â€“59', this)">55â€“59</button>
                    <button type="button" class="btn btn-option" data-value="60æ­²ä»¥ä¸Š" onclick="selectOption('age', '60æ­²ä»¥ä¸Š', this)">60æ­²ä»¥ä¸Š</button>
                </div>
            </div>

            <!-- æ¬„ä½ 4: æŠ•è³‡ç¶“é©— (å››é¸ä¸€) -->
            <div>
                <span class="label">æŠ•è³‡ç¶“é©—ï¼Œç›®å‰æœ€æ¥è¿‘ä½ çš„æ˜¯å“ªä¸€ç¨®ï¼Ÿ</span>
                <div id="experience-group" class="option-group option-group-full">
                    <button type="button" class="btn btn-option" data-value="æˆ‘é‚„åœ¨äº†è§£æ€éº¼é‹ä½œï¼Œå…ˆçœ‹çœ‹è€Œå·²" onclick="selectOption('experience', 'æˆ‘é‚„åœ¨äº†è§£æ€éº¼é‹ä½œï¼Œå…ˆçœ‹çœ‹è€Œå·²', this)">æˆ‘é‚„åœ¨äº†è§£æ€éº¼é‹ä½œï¼Œå…ˆçœ‹çœ‹è€Œå·²</button>
                    <button type="button" class="btn btn-option" data-value="æˆ‘æœ‰ä¸‹éå–®ï¼Œç®—æ˜¯é‚Šåšé‚Šå­¸" onclick="selectOption('experience', 'æˆ‘æœ‰ä¸‹éå–®ï¼Œç®—æ˜¯é‚Šåšé‚Šå­¸', this)">æˆ‘æœ‰ä¸‹éå–®ï¼Œç®—æ˜¯é‚Šåšé‚Šå­¸</button>
                    <button type="button" class="btn btn-option" data-value="æˆ‘å›ºå®šæœ‰åœ¨æŠ•è³‡ï¼Œç®—æ—¥å¸¸çš„ä¸€éƒ¨åˆ†äº†" onclick="selectOption('experience', 'æˆ‘å›ºå®šæœ‰åœ¨æŠ•è³‡ï¼Œç®—æ—¥å¸¸çš„ä¸€éƒ¨åˆ†äº†', this)">æˆ‘å›ºå®šæœ‰åœ¨æŠ•è³‡ï¼Œç®—æ—¥å¸¸çš„ä¸€éƒ¨åˆ†äº†</button>
                    <button type="button" class="btn btn-option" data-value="æŠ•è³‡åŸºæœ¬ä¸Šæ˜¯æˆ‘çš„æ—¥å¸¸é‹å‹•ä¹‹ä¸€" onclick="selectOption('experience', 'æŠ•è³‡åŸºæœ¬ä¸Šæ˜¯æˆ‘çš„æ—¥å¸¸é‹å‹•ä¹‹ä¸€', this)">æŠ•è³‡åŸºæœ¬ä¸Šæ˜¯æˆ‘çš„æ—¥å¸¸é‹å‹•ä¹‹ä¸€</button>
                </div>
            </div>
            
            <!-- éŒ¯èª¤è¨Šæ¯ç§»åˆ°æŒ‰éˆ•ä¸Šæ–¹ -->
            <div id="info-error-message" class="error-message hidden mb-4">
                é‚„æ²’å¡«å®Œå–” ğŸ‘€
            </div>

            <button type="button" class="btn btn-primary w-full mt-4" onclick="handleInfoSubmit()">
                é–‹å§‹æ¸¬é©—
            </button>
        </section>

        <!-- ---------------------------------------------------- -->
        <!-- éšæ®µ 2: é¡Œç›®ä½œç­”é  (Quiz) -->
        <!-- ---------------------------------------------------- -->
        <section id="quiz-section" class="card hidden">
            
            <!-- é€²åº¦æ¢ -->
            <h3 class="text-center font-semibold mb-2" style="color: var(--text-light);">
                é¡Œç›®é€²åº¦ï¼š<span id="current-progress"></span>
            </h3>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill"></div>
            </div>

            <!-- é¡Œç›®å€åŸŸ -->
            <div id="question-area">
                <!-- é¡Œç›®å’Œé¸é …æœƒå‹•æ…‹è¼‰å…¥åˆ°é€™è£¡ -->
            </div>

            <div id="quiz-error-message" class="error-message hidden mt-4">
                <!-- éŒ¯èª¤è¨Šæ¯æœƒåœ¨é€™è£¡é¡¯ç¤º -->
            </div>

            <div class="mt-6 flex gap-4">
                <button id="back-button" type="button" class="btn w-1/2 hidden" onclick="prevQuestion()">
                    ä¸Šä¸€é¡Œ
                </button>
                <button id="next-button" type="button" class="btn btn-primary w-full" onclick="nextQuestion()">
                    ä¸‹ä¸€é¡Œ
                </button>
            </div>
        </section>

        <!-- ---------------------------------------------------- -->
        <!-- éšæ®µ 3: çµæœé  (Result) -->
        <!-- ---------------------------------------------------- -->
        <section id="result-section" class="card hidden text-center">
            <h2 id="result-greeting" class="text-xl font-bold mb-4" style="color: var(--text-color);">
                <!-- å—¨ï¼Œ{{name}}ï¼ä½ çš„ç†è²¡äººæ ¼æ˜¯â€”â€” -->
            </h2>
            
            <div id="result-display-area" class="mt-8">
                <!-- äººæ ¼åˆ†æçµæœæœƒå‹•æ…‹è¼‰å…¥åˆ°é€™è£¡ -->
            </div>

            <!-- åˆ†äº«æŒ‰éˆ• (è§¸ç™¼åˆ—å°/å„²å­˜ç‚º PDF) -->
            <button type="button" class="btn btn-primary w-full mt-8" onclick="printResult()">
                åˆ†äº«æˆ‘çš„ç†è²¡äººæ ¼ ğŸš€
            </button>
            
            <button type="button" class="btn w-full mt-4" onclick="resetQuiz()">
                å†ç©ä¸€æ¬¡
            </button>
        </section>
        
        <p class="disclaimer">
            æœ¬æ¸¬é©—åƒ…ä¾›æŠ•è³‡é¢¨æ ¼å‚¾å‘åƒè€ƒï¼ŒéæŠ•è³‡å»ºè­°ï¼ŒæŠ•è³‡ä»é ˆè‡ªè¡Œåˆ¤æ–·é¢¨éšªèˆ‡é©åˆåº¦ã€‚
        </p>

    </div>
    
    <!-- è¨Šæ¯æç¤ºæ¡† (å–ä»£ alert) -->
    <div id="message-box" class="message-box"></div>

    <script>
        // ----------------------------------------------------
        // å…¨åŸŸç‹€æ…‹èˆ‡è³‡æ–™å®šç¾©
        // ----------------------------------------------------

        // ä¿®æ­£ï¼šå°‡ let/const è®Šæ›´ç‚º varï¼Œä»¥æé«˜èˆŠç‰ˆç€è¦½å™¨/ç’°å¢ƒçš„ç›¸å®¹æ€§ï¼Œé¿å… SyntaxError
        var userInfo = {};
        var currentQuestionIndex = 0; // 0-based index
        
        // æ–°å¢ answerHistory å„²å­˜æ‰€æœ‰ç­”æ¡ˆï¼Œä»¥ä¾¿å›ä¸Šä¸€é 
        var totalQuestions = 8;
        var answerHistory = Array(totalQuestions).fill(null); // åˆå§‹åŒ–ç‚º null
        var selectedChoiceValue = null;

        const infoSection = document.getElementById('info-section');
        const quizSection = document.getElementById('quiz-section');
        const resultSection = document.getElementById('result-section');
        const infoError = document.getElementById('info-error-message');
        const quizError = document.getElementById('quiz-error-message');
        const nextButton = document.getElementById('next-button');
        const backButton = document.getElementById('back-button');
        const progressFill = document.getElementById('progress-fill');
        const currentProgress = document.getElementById('current-progress');
        const questionArea = document.getElementById('question-area');
        const messageBox = document.getElementById('message-box');

        // é¡Œç›®æ–‡æ¡ˆèˆ‡è¨ˆåˆ†å°æ‡‰ (MANDATORY DATA)
        const questions = [
            { id: 1, question: "é ˜åˆ°å¹´çµ‚çé‡‘10è¬ï¼Œä½ çš„ç¬¬ä¸€åæ‡‰æ˜¯ï¼Ÿ", options: ["çµ‚æ–¼æœ‰å½ˆè—¥ï¼ç ”ç©¶å¹¾å€‹æ¨™çš„ï¼Œè©²å‡ºæ‰‹äº†ğŸ”¥", "å…ˆæ‹¿å»å­˜ä¸€åŠï¼Œå‰©ä¸‹ä¸€åŠå†æŠ•è³‡ï¼Œæ¯”è¼ƒç©©", "æƒ³å»æ—…éŠæˆ–çŠ’è³è‡ªå·±ï¼Œäººç”Ÿè¦åŠæ™‚è¡Œæ¨‚", "æ‹¿å»å•ChatGPTçœ‹è©²è²·å“ªæ”¯ETFï¼ˆèª¤ï¼‰"] },
            { id: 2, question: "æœ‹å‹èªªæœ€è¿‘æŸæª”ETFã€Œäººäººéƒ½åœ¨è²·ã€ï¼Œä½ æœƒæ€éº¼åæ‡‰ï¼Ÿ", options: ["å†·éœæŸ¥è³‡æ–™ï¼Œçœ‹å®ƒæ†‘ä»€éº¼ç´…", "å°è©¦ä¸€å¼µï¼Œæ„Ÿè¦ºä¸éŒ¯å°±å¤šè²·é»", "å¤§å®¶éƒ½è²·äº†æˆ‘ä¸èƒ½éŒ¯éå•Šï¼", "æˆ‘å°ç†±é–€çš„æ±è¥¿ä¸€å¾‹è­¦æˆ’"] },
            { id: 3, question: "çœ‹åˆ°è‚¡åƒ¹è·Œäº†5%ï¼Œä½ æœƒï¼Ÿ", options: ["é–‹å¿ƒï¼åˆå¯ä»¥æ’¿ä¾¿å®œ", "è§€æœ›å¹¾å¤©ï¼Œæä¸å¥½æœƒå†è·Œ", "æœ‰é»ç„¦èºä½†é‚„èƒ½æ’", "é—œAPPå‡è£æ²’çœ‹åˆ°"] },
            { id: 4, question: "ä½ æŠ•è³‡æœ€å¸¸é ä»€éº¼ï¼Ÿ", options: ["æ•¸æ“šå ±è¡¨ï¼‹é‚è¼¯åˆ†æ", "å¿ƒä¸­å°åŠ‡å ´ï¼šã€Œæˆ‘æ„Ÿè¦ºå®ƒæœƒæ¼²ï¼ã€", "ç¾¤çµ„è£¡å¤§å®¶éƒ½èªªä¸éŒ¯ï¼Œé‚£æ‡‰è©²ç©©å§ï¼Ÿ", "çœ‹è¨­è¨ˆæ„Ÿï¼Œæœ‰è³ªæ„Ÿçš„ä¼æ¥­æˆ‘å°±æƒ³æŠ•"] },
            { id: 5, question: "æŠ•è³‡å°ä½ ä¾†èªªæ¯”è¼ƒåƒå“ªç¨®éŠæˆ²ï¼Ÿ", options: ["æ¨¡æ“¬åŸå¸‚ï¼šæˆ‘è¦åŠƒé•·é ï¼Œæ…¢æ…¢å»º", "ä¿„ç¾…æ–¯æ–¹å¡Šï¼šéœ€è¦åæ‡‰å¿«ã€æ‰‹è…³ä¿è½", "å¯†å®¤é€ƒè„«ï¼šåˆºæ¿€ã€æœ‰é¢¨éšªä½†æœ‰æˆå°±æ„Ÿ", "å‹•æ£®ï¼šåªè¦ç©©å®šå­˜éŒ¢ã€çœ‹å³¶ä¸Šæˆé•·å°±é–‹å¿ƒ"] },
            { id: 6, question: "å‡å¦‚ä½ çš„æŠ•è³‡å¸³æˆ¶å¯ä»¥èªªè©±ï¼Œå®ƒæœƒæ€éº¼å½¢å®¹ä½ ï¼Ÿ", options: ["ã€Œç´€å¾‹æ´¾ä»£è¡¨ï¼ä½ é€£æˆ‘éƒ½æ•¬ä½©ğŸ˜Œã€", "ã€Œä½ æ˜¯è®ŠåŒ–å¤šç«¯çš„è—è¡“å®¶ï¼Œä¸€å¤©ä¸€å€‹æƒ³æ³•ã€", "ã€Œä½ å¾ˆç©©ï¼Œä½†æœ‰æ™‚ä¹Ÿå¤ªä½›äº†å§ï¼Ÿã€", "ã€Œä½ å¸¸åŠå¤œç™»å…¥ï¼Œè¡ä¸€æ³¢åˆç§’ç™»å‡ºğŸ˜‚ã€"] },
            { id: 7, question: "å¸‚å ´å¤§æ¼²æ™‚ä½ æœƒï¼Ÿ", options: ["å†·éœæé†’è‡ªå·±ã€åˆ¥è¢«è²ªå©ªæ§åˆ¶ã€", "çœ‹ä¸€ä¸‹æœ‰æ²’æœ‰æ©Ÿæœƒè£œå€‰", "è¡é€²å»å•Šï¼éŒ¯éæœƒç¡ä¸è‘—ï¼", "å¹«æœ‹å‹é–‹å¿ƒï¼Œè‡ªå·±ä¸æ•¢å‹•"] },
            { id: 8, question: "ä½ æœ€ç†æƒ³çš„æŠ•è³‡ç”Ÿæ´»æ˜¯ï¼Ÿ", options: ["ç³»çµ±åŒ–ã€èƒ½è‡ªå‹•å¹«æˆ‘åŸ·è¡Œ", "è‡ªå·±æŒæ§ç¯€å¥ã€æœ‰å½ˆæ€§èª¿æ•´", "å’Œæœ‹å‹è¨è«–ã€ä¸€èµ·å­¸ç¿’æˆé•·", "æŠ•è³‡åªæ˜¯ç”Ÿæ´»çš„ä¸€éƒ¨åˆ†ï¼Œä¸æƒ³å¤ªç·Šç¹ƒ"] },
        ];
        
        // é¡Œç›®èˆ‡åˆ†æ•¸å°æ‡‰è¡¨
        const scoreMap = {
            1: { A: "ARC", B: "ASC", C: "ISC", D: "IRN" },
            2: { A: "ASC", B: "ARC", C: "ARC", D: "ISC" },
            3: { A: "ARC", B: "ASC", C: "ISC", D: "ISC" },
            4: { A: "ASC", B: "ARC", C: "IRN", D: "ISC" },
            5: { A: "ASC", B: "ARC", C: "ARC", D: "ISC" },
            6: { A: "ASC", B: "ARC", C: "ISC", D: "ARC" },
            7: { A: "ASC", B: "ARC", C: "ARC", D: "ISC" },
            8: { A: "ASC", B: "ARC", C: "IRN", D: "ISC" },
        };

        // äººæ ¼çµæœå®šç¾© (å·²æ ¹æ“šç”¨æˆ¶è¦æ±‚æ›´æ–°æ–‡æ¡ˆï¼Œç¢ºä¿æ‰€æœ‰æ®µè½é–‹é ­éƒ½æ˜¯å–®å€‹å…¨å½¢ç©ºæ ¼)
        const personalities = {
            ASC: {
                name: "ç†æ€§æ§ç®¡è€…",
                tagline: "ç©©ä¸­æ±‚å‹ï¼Œçµ•ä¸äº‚æŠ¼",
                description: "ã€€ä½ æ˜¯é‚£ç¨®çœ‹åˆ°ã€Œç©©å®šå ±é…¬ 5%ã€å°±è¦ºå¾—å¿ƒå®‰çš„äººã€‚å°ä½ ä¾†èªªï¼Œä¸–ç•Œè¦æœ‰ç§©åºï¼Œç”Ÿæ´»è¦æœ‰è¦åŠƒã€‚ä½ ç¿’æ…£åœ¨è¡Œå‹•å‰å…ˆæƒ³æ¸…æ¥šï¼Œæ—¥å¸¸é€£å‡ºé–€æ—…è¡Œéƒ½æœƒåˆ—æ¸…å–®ã€‚åˆ¥äººèªªä½ æ…¢ï¼Œå…¶å¯¦ä½ åªæ˜¯ä¸å–œæ­¡æµªè²»ã€‚<br>ã€€ä½ å¸¸åœ¨è…¦ä¸­åšå°ç®—ç›¤ï¼šé€™æ¨£åšå€¼ä¸å€¼ï¼Ÿé€™å€‹é¸æ“‡é•·æœŸåˆ’ä¸åˆ’ç®—ï¼Ÿä½ å°é¢¨éšªçš„æ•æ„Ÿåº¦æ¯”å¤šæ•¸äººé«˜ï¼Œä¹Ÿå¾ˆé›£å®¹å¿ã€Œæ²’æŠŠäº‹æƒ…åšå¥½ã€çš„è‡ªå·±ã€‚ä½ ä¸è¿½æ±‚è¯éº—çš„è¼¸è´ï¼Œè€Œæ˜¯å¸Œæœ›æ¯ä¸€æ­¥éƒ½åˆç†ã€æœ‰é‚è¼¯ã€æœ‰æ„ç¾©ã€‚åœ¨äººéš›è£¡ï¼Œä½ æ˜¯èƒ½è®“äººä¿¡ä»»çš„é‚£å€‹ï¼›åœ¨æ„›æƒ…è£¡ï¼Œä½ ä¸å¤ªèŠ±è¨€å·§èªï¼Œä½†æœƒé»˜é»˜è¨˜å¾—å°æ–¹å–œæ­¡ä»€éº¼ã€è¨å­ä»€éº¼ï¼Œç…§é¡§ç´°ç¯€æ¯”ç”œè¨€èœœèªæ›´èƒ½è¡¨é”ä½ çš„åœ¨ä¹ã€‚<br>ã€€åœ¨æŠ•è³‡ä¸Šï¼Œä½ ä¹Ÿæ˜¯é€™æ¨£â€”â€”å…ˆç ”ç©¶ã€å†è¡Œå‹•ã€‚ä½ ä¸æ€•è³ºå¾—æ…¢ï¼Œåªæ€•äº‚äº†ç¯€å¥ã€‚å¸‚å ´æ³¢å‹•æ™‚ä½ ä¸æ…Œå¼µï¼Œå› ç‚ºä½ æ—©å°±è¨­å®šå¥½åœæèˆ‡ç›®æ¨™ã€‚<br><br>",
                advice: "ã€æŠ•è³‡ç‰¹å¾µã€‘<br>ï¼ç¿’æ…£å…ˆç ”ç©¶å†å‹•ä½œï¼Œåå¥½æœ‰æ•¸æ“šæ”¯æ’çš„æ±ºç­–<br>ï¼å°æŠ•è³‡å ±é…¬ç‡çš„æ³¢å‹•å®¹å¿åº¦ä½<br>ï¼èƒ½åœ¨å¸‚å ´ææ…Œä¸­ä¿æŒå†·éœï¼Œæ“…é•·è³‡ç”¢åˆ†é…èˆ‡é¢¨éšªæ§ç®¡<br><br>ã€å°ˆæ¥­å»ºè­°ã€‘<br>ä½ é©åˆæ¡ç”¨ é•·æœŸé…ç½®èˆ‡ç³»çµ±åŒ–ç´€å¾‹æŠ•è³‡ çš„æ¨¡å¼<br>âœ… ETF å®šæœŸå®šé¡ã€é…æ¯å†æŠ•å…¥<br>âœ… ä½¿ç”¨è³‡ç”¢é…ç½®æ¯”ä¾‹ï¼ˆå¦‚ 60/40ï¼‰æ§åˆ¶é¢¨éšª<br>âœ… å°‡ç†è²¡è‡ªå‹•åŒ–ï¼Œæ¸›å°‘æƒ…ç·’å¹²æ“¾<br><br>ä½ æ˜¯æŠ•è³‡è£¡çš„ã€Œå»ºç¯‰å¸«ã€â€”â€”ä¸€æ­¥æ­¥è¨­è¨ˆå¥½æœªä¾†ï¼Œæœ€å¾Œçœ‹è‘—è²¡å‹™è—åœ–ç©©ç©©æˆå½¢ã€‚<br><br>"
            },
            ARC: {
                name: "ä¸»å‹•çµæ‰‹",
                tagline: "çœ‹åˆ°æ©Ÿæœƒï¼Œå°±å…ˆå¡ä½",
                description: "ã€€ä½ æ˜¯é‚£ç¨®ã€Œåªè¦è…¦ä¸­æœ‰éˆæ„Ÿï¼Œæ‰‹å°±æœƒå…ˆå‹•ã€çš„äººã€‚ä½ è¡Œå‹•å¿«ã€åæ‡‰å¿«ï¼Œå°è®ŠåŒ–ç‰¹åˆ¥æœ‰æ„Ÿè¦ºã€‚ä½ ä¸å–œæ­¡æ‹–ï¼Œå–œæ­¡åœ¨æœ€ç†±çš„æ™‚å€™å‡ºæ“Šã€‚æœ‰æ™‚å€™åˆ¥äººé‚„åœ¨çŒ¶è±«ï¼Œä½ å·²ç¶“å®Œæˆæ±ºç­–ï¼Œç”šè‡³é–‹å§‹ä¸‹ä¸€æ­¥ã€‚<br>ã€€ä½ å°ç”Ÿæ´»çš„æ…‹åº¦æ˜¯ã€Œæˆ‘ä¸ä¸€å®šæœ€ç©©ï¼Œä½†ä¸€å®šæœ€çœŸã€ã€‚ä½ ç›¸ä¿¡å¯¦æˆ°æ¯”è¦åŠƒé‡è¦ï¼Œè¦ºå¾—æ©Ÿæœƒæ˜¯ç•™çµ¦æ•¢è¡çš„äººã€‚ä½ çš„äººæ ¼è£¡å¸¶è‘—å¤©ç”Ÿçš„è‡ªä¿¡èˆ‡è¡¨ç¾æ…¾ï¼Œæ“…é•·åœ¨ä¸ç¢ºå®šä¸­æ‰¾æ–¹å‘ã€‚æ„›æƒ…è£¡çš„ä½ ç†±çƒˆåˆç›´æ¥ï¼Œæ„Ÿè¦ºå°äº†å°±æŠ•å…¥ï¼Œä½†ä¹Ÿéœ€è¦å°æ–¹æ‡‚å¾—çµ¦ç©ºé–“ï¼Œå› ç‚ºä½ å®³æ€•è¢«ç¶ä½ï¼Œä¸æƒ³è¢«æ§åˆ¶ç¯€å¥ã€‚<br>ã€€åœ¨æŠ•è³‡ä¸Šï¼Œä½ å°±æ˜¯ã€Œå¸‚å ´ç¯€å¥æ•æ‰‹ã€ã€‚ä½ æ•¢é€²ã€æ•¢é€€ï¼Œé¡˜æ„è©¦éŒ¯ã€‚ä½ äº«å—æ³¢å‹•çš„åˆºæ¿€ï¼Œæ‡‚å¾—åˆ©ç”¨çŸ­æœŸç¯€å¥ç²åˆ©ï¼›åªæ˜¯æœ‰æ™‚å€™ï¼Œä½ è¡å¤ªå¿«ï¼Œå¿˜äº†æ›¿è‡ªå·±è¨­å®‰å…¨ç¹©ã€‚<br><br>",
                advice: "ã€æŠ•è³‡ç‰¹å¾µã€‘<br>ï¼å–œæ­¡æŒæ¡å³æ™‚å¸‚å ´è³‡è¨Šã€è¿½ç†±é–€é¡Œæ<br>ï¼è¡Œå‹•æœæ–·ï¼ŒæˆåŠŸç‡é«˜æ™‚è‡ªä¿¡çˆ†æ£š<br>ï¼å®¹æ˜“å—å¸‚å ´æƒ…ç·’å½±éŸ¿ï¼Œä½†åæ‡‰é€Ÿåº¦å¿«<br><br>ã€å°ˆæ¥­å»ºè­°ã€‘<br>ä½ çš„å¼·é …æ˜¯ã€Œè¡Œå‹•åŠ›ã€èˆ‡ã€Œå¸‚å ´å—…è¦ºã€ï¼Œå»ºè­°çµåˆ\"æˆ°è¡“æ€§æ“ä½œï¼‹æ ¸å¿ƒè³‡ç”¢é…ç½®\"<br>âš¡ ç”¨ 20ï½30% è³‡é‡‘æ“ä½œä¸»é¡ŒETFã€çŸ­ç·šæ¨™çš„ã€AIã€é›»å‹•è»Šç­‰é¡Œæã€‚<br>ğŸ›¡ï¸ å…¶é¤˜ 70ï½80% ä¿ç•™æ–¼ç©©å¥å•†å“ï¼ˆé«˜è‚¡æ¯ETFã€ç¾å‚µã€ç¾å…ƒå®šå­˜ï¼‰ã€‚<br><br>ä½ å¤©ç”Ÿæ˜¯æŠ•è³‡çš„ã€Œæˆ°è¡“å®¶ã€ï¼Œåªè¦è¨˜å¾—æ›¿è‡ªå·±ç•™å¾Œè·¯ï¼Œå¸‚å ´çš„èµ·è½ï¼Œåè€Œæœƒæˆç‚ºä½ çš„éŠæ¨‚å ´ã€‚<br><br>"
            },
            ISC: {
                name: "ç”Ÿæ´»å®ˆè­·è€…",
                tagline: "æŠ•è³‡æ˜¯ç‚ºäº†éå¾—å®‰å¿ƒï¼Œä¸æ˜¯ç‚ºäº†å¿ƒè‡Ÿç—…",
                description: "ã€€ä½ æ˜¯é‚£ç¨®æœ€æ€•ã€Œçªç™¼ç‹€æ³ã€çš„äººã€‚ä½ å–œæ­¡ç”Ÿæ´»æœ‰ç¯€å¥ã€æ­¥èª¿å¯é æ¸¬ã€‚æœ‹å‹èªªä½ æº«å’Œã€ç©©å®šã€å¥½ç›¸è™•ï¼Œä½†ä½ å…¶å¯¦æœ‰è‡ªå·±çš„ä¸€å¥—åŸå‰‡ã€‚ä½ åœ¨æ„ç´°ç¯€ï¼Œä¸å–œæ­¡å¤ªå¤šä¸ç¢ºå®šï¼›ä½ æœƒæº–å‚™å‚™æ¡ˆã€å‚™ä»½ï¼Œå› ç‚ºé€™æ¨£æ‰èƒ½å®‰å¿ƒã€‚ä½ åšäº‹è¸å¯¦ï¼Œä¸å–œæ­¡æ¶é¢¨é ­ï¼Œå¯§é¡˜ç©©ç©©åœ°åšå¥½æ¯ä¸€ä»¶äº‹ã€‚<br>ã€€åœ¨äººéš›ä¸­ï¼Œä½ æ˜¯é‚£å€‹é»˜é»˜ä»˜å‡ºã€è®“å¤§å®¶éƒ½è¦ºå¾—èˆ’æœçš„å­˜åœ¨ã€‚åœ¨æ„›æƒ…è£¡ï¼Œä½ ä¸å–œæ­¡å¤ªå¤šæˆ²åŠ‡æ€§ï¼Œæœ€æ€•æƒ…ç·’åŒ–çš„äººã€‚ä½ è¦çš„ä¸æ˜¯é©šå–œï¼Œè€Œæ˜¯èƒ½ä¸€èµ·ç”Ÿæ´»ä¸‹å»çš„å®‰å®šã€‚<br>ã€€åœ¨æŠ•è³‡ä¸Šï¼Œä½ è¿½æ±‚çš„ä¹Ÿæ˜¯é€™ä»½å®‰å®šã€‚ä½ ä¸å–œæ­¡è³ºå¿«éŒ¢ï¼Œä¹Ÿä¸æƒ³è¢«æ³¢å‹•æå¾—ç„¦æ…®ã€‚ä½ ç›¸ä¿¡éŒ¢è©²ã€Œæœ‰ç¯€å¥åœ°é•·ã€ï¼Œå°±åƒäººç”Ÿè©²ç©©ç©©å‰é€²ã€‚<br><br>",
                advice: "ã€æŠ•è³‡ç‰¹å¾µã€‘<br>â˜˜ï¸ ä»¥é•·æœŸå®‰å¿ƒç‚ºå„ªå…ˆï¼Œä¸è¿½é«˜ã€ä¸æ®ºä½<br>â˜˜ï¸ å–œæ­¡ç©©å®šé ˜æ¯ã€ç©©å®šå¢å€¼çš„å•†å“<br>â˜˜ï¸ å»ºç«‹ä¸‰ï½å…­å€‹æœˆç”Ÿæ´»é å‚™é‡‘<br>â˜˜ï¸ å°‡éƒ¨åˆ†è³‡é‡‘è½‰ç‚ºå®šæœŸæ”¶å…¥ä¾†æºï¼ˆå¦‚æœˆé…æ¯åŸºé‡‘ï¼‰<br><br>ã€å°ˆæ¥­å»ºè­°ã€‘<br>ä½ é©åˆ ç¾é‡‘æµå°å‘å‹æŠ•è³‡<br>â˜˜ï¸ å­˜è‚¡ã€é…æ¯ETFã€å‚µåˆ¸åŸºé‡‘<br>â˜˜ï¸ å»ºç«‹ä¸‰ï½å…­å€‹æœˆç”Ÿæ´»é å‚™é‡‘<br>â˜˜ï¸ å°‡éƒ¨åˆ†è³‡é‡‘è½‰ç‚ºå®šæœŸæ”¶å…¥ä¾†æºï¼ˆå¦‚æœˆé…æ¯åŸºé‡‘ï¼‰<br><br>æŠ•è³‡å°ä½ è€Œè¨€ï¼Œæ‡‰è©²åƒæ³¡å’–å•¡ï¼šç¯€å¥å‰›å¥½ã€é¦™æ°£ç©©å®šï¼Œä¸æ€¥ä¸èºã€‚ä½ çš„æˆåŠŸï¼Œä¸åœ¨è³ºå¾—å¤šï¼Œè€Œæ˜¯é•·ä¹…åœ°ã€Œæ´»å¾—è¼•é¬†ã€ã€‚<br><br>"
            },
            IRN: {
                name: "æˆé•·åˆå¤¥äºº",
                tagline: "ä¸€èµ·ç ”ç©¶ï¼Œä¸€èµ·è®Šå¼·",
                description: "ã€€ä½ æ˜¯é‚£ç¨®çœ‹åˆ°æ–°è§€é»å°±æƒ³ç«‹åˆ»æŸ¥è³‡æ–™çš„äººã€‚ä½ å°ä¸–ç•Œå……æ»¿å¥½å¥‡ï¼Œå–œæ­¡ç†è§£èƒŒå¾Œçš„é‚è¼¯ã€‚ä½ ä¸ä¸€å®šæ˜¯æœ€æ¿€é€²çš„ï¼Œä½†ä½ æ°¸é åœ¨é€²æ­¥ã€‚ä½ é¡˜æ„å­¸ã€é¡˜æ„å•ï¼Œä¹Ÿé¡˜æ„è½ä¸åŒçš„æƒ³æ³•ã€‚ä½ çš„äººæ ¼æº«å’Œã€æœ‰è€æ€§ï¼Œä¸è¼•æ˜“æ‰¹è©•åˆ¥äººã€‚ä½ ç›¸ä¿¡æ¯å€‹äººéƒ½æœ‰è‡ªå·±çš„æ­¥èª¿ï¼Œåªè¦é¡˜æ„åŠªåŠ›ï¼Œå°±æœƒè®Šå¥½ã€‚ä½ é‡è¦–ã€Œæˆé•·ã€é€™å…©å€‹å­—ï¼Œä¸åªæ˜¯é‡‘éŒ¢ä¸Šçš„ï¼Œä¹ŸåŒ…æ‹¬æ€è€ƒèˆ‡å¿ƒéˆã€‚<br>ã€€åœ¨æ„›æƒ…è£¡ï¼Œä½ å¸Œæœ›èƒ½å’Œå°æ–¹ä¸€èµ·æˆé•·ã€ä¸€èµ·å­¸ç¿’ã€‚ä½ ä¸éœ€è¦è¢«ç…§é¡§ï¼Œåªå¸Œæœ›è¢«ç†è§£ã€‚å°ä½ ä¾†èªªï¼Œé—œä¿‚æœ€å‹•äººçš„åœ°æ–¹ï¼Œä¸æ˜¯æµªæ¼«çš„é©šå–œï¼Œè€Œæ˜¯èƒ½ä¸¦è‚©é€²æ­¥ã€ä¸€èµ·è®Šå¾—æ›´å¥½ã€‚<br>ã€€æŠ•è³‡å°ä½ è€Œè¨€ï¼Œæ˜¯å­¸ç¿’çš„ä¸€éƒ¨åˆ†ã€‚ä½ ä¸æ€•ç ”ç©¶ã€ä¸æ€•èŠ±æ™‚é–“ï¼Œæœƒæ¯”è¼ƒå ±é…¬ç‡ã€è¨˜éŒ„å¿ƒå¾—ï¼Œå¾æ¯æ¬¡æ“ä½œè£¡å­¸ç¶“é©—ã€‚ä½ ä¸æ˜¯æœ€å¿«çš„ï¼Œä½†ä½ èµ°å¾—æœ€ä¹…ï¼Œå› ç‚ºä½ æ˜ç™½ï¼šç©©å®šæˆé•·ï¼Œæ‰æ˜¯æœ€é•·é çš„å‹åˆ©ã€‚<br><br>",
                advice: "ã€æŠ•è³‡ç‰¹å¾µã€‘<br>ï¼å–œæ­¡äº¤æµæƒ³æ³•ã€å¸æ”¶ä»–äººè§€é»<br>ï¼å°æŠ•è³‡çŸ¥è­˜æœ‰ç†±å¿±ï¼Œå­¸å¾—å¿«ã€è¨˜å¾—ä¹…<br>ï¼é€šå¸¸æŠ•è³‡ç¯€å¥ç©©å®šã€ç´€å¾‹æ€§é«˜<br><br>ã€å°ˆæ¥­å»ºè­°ã€‘<br>ä½ é©åˆ å­¸ç¿’å°å‘ï¼‹æˆé•·å‹æŠ•è³‡<br>ğŸ“˜ ç¶­æŒæŠ•è³‡ç­†è¨˜ç¿’æ…£ï¼ˆç´€éŒ„æƒ³æ³•èˆ‡çµæœï¼‰<br>ğŸ“˜ åƒåŠ æŠ•è³‡ç¤¾ç¾¤æˆ–å­¸ç¿’èª²ç¨‹<br>ğŸ“˜ å¯å»¶ä¼¸æ¥è§¸é‡åŒ–ç­–ç•¥ã€åŸºæœ¬é¢ç ”ç©¶ã€æµ·å¤–ETF<br><br>ä½ æ˜¯ã€ŒæŠ•è³‡ä¸–ç•Œçš„å…±å­¸å¤¥ä¼´ã€â€”â€”ç•¶åˆ¥äººå­¤è»å¥®æˆ°æ™‚ï¼Œä½ ç”¨åˆ†äº«è®“è‡ªå·±æ›´å¼·ã€‚ä½ çš„æˆé•·é€Ÿåº¦ï¼Œæœƒæ¯”ä½ æƒ³åƒçš„å¿«å¾—å¤šã€‚<br><br>"
            }
        };

        // ----------------------------------------------------
        // éšæ®µ 1: åŸºæœ¬è³‡æ–™é‚è¼¯
        // ----------------------------------------------------

        /**
         * è™•ç†åŸºæœ¬è³‡æ–™é çš„å–®é¸æŒ‰éˆ•é¸æ“‡
         * @param {string} groupName - æ¬„ä½åç¨± (gender, age, experience)
         * @param {string} value - é¸æ“‡çš„å€¼
         * @param {HTMLElement} element - è¢«é»æ“Šçš„æŒ‰éˆ•å…ƒç´ 
         */
        function selectOption(groupName, value, element) {
            // ç§»é™¤åŒçµ„å…¶ä»–æŒ‰éˆ•çš„ selected æ¨£å¼
            const group = document.getElementById(`${groupName}-group`);
            group.querySelectorAll('.btn').forEach(btn => {
                btn.classList.remove('btn-selected');
            });

            // ç‚ºç•¶å‰æŒ‰éˆ•å¢åŠ  selected æ¨£å¼
            element.classList.add('btn-selected');
            
            // å„²å­˜åˆ°å…¨åŸŸ userInfo æš«å­˜
            userInfo[groupName] = value;
        }

        /**
         * è™•ç†ã€Œé–‹å§‹æ¸¬é©—ã€æŒ‰éˆ•é»æ“Šäº‹ä»¶
         */
        function handleInfoSubmit() {
            const nameInput = document.getElementById('user-name');
            userInfo.name = nameInput.value.trim();

            // æª¢æŸ¥æ‰€æœ‰æ¬„ä½æ˜¯å¦å·²å¡«å¯«/é¸æ“‡
            if (!userInfo.name || !userInfo.gender || !userInfo.age || !userInfo.experience) {
                infoError.textContent = "é‚„æ²’å¡«å®Œå–” ğŸ‘€";
                infoError.classList.remove('hidden');
                return;
            }

            infoError.classList.add('hidden');

            // å„²å­˜æœ€çµ‚åŸºæœ¬è³‡æ–™åˆ° console
            console.log("user_profile", userInfo);
            
            // åˆ‡æ›åˆ°æ¸¬é©—éšæ®µ
            infoSection.classList.add('hidden');
            quizSection.classList.remove('hidden');

            // é–‹å§‹è¼‰å…¥ç¬¬ä¸€é¡Œ
            renderQuestion();
        }

        // ----------------------------------------------------
        // éšæ®µ 2: é¡Œç›®ä½œç­”é‚è¼¯
        // ----------------------------------------------------

        /**
         * æ¸²æŸ“ç•¶å‰é¡Œç›®ï¼Œä¸¦é‚„åŸæ­·å²é¸æ“‡
         */
        function renderQuestion() {
            if (currentQuestionIndex >= questions.length) {
                // çµæŸæ¸¬é©—ï¼Œåˆ‡æ›åˆ°çµæœé 
                showResults();
                return;
            }

            const q = questions[currentQuestionIndex];
            const qNumber = currentQuestionIndex + 1;
            
            // æª¢æŸ¥æ­·å²ç´€éŒ„ï¼Œå¦‚æœæœ‰ç­”æ¡ˆå‰‡é‚„åŸ
            const prevAnswer = answerHistory[currentQuestionIndex];
            selectedChoiceValue = prevAnswer ? prevAnswer.choice : null;
            
            quizError.classList.add('hidden');
            
            // è™•ç†æŒ‰éˆ•æ–‡å­—
            nextButton.textContent = qNumber === questions.length ? 'çœ‹çµæœ' : 'ä¸‹ä¸€é¡Œ';

            // æ›´æ–°æŒ‰éˆ•æ’ç‰ˆ (Q1 éš±è—ä¸Šä¸€é¡Œï¼Œä¸‹ä¸€é¡Œä½”æ»¿)
            if (currentQuestionIndex === 0) {
                backButton.classList.add('hidden');
                nextButton.classList.remove('w-1/2');
                nextButton.classList.add('w-full');
            } else {
                backButton.classList.remove('hidden');
                nextButton.classList.add('w-1/2');
                nextButton.classList.remove('w-full');
            }


            // æ›´æ–°é€²åº¦æ¢
            currentProgress.textContent = `${qNumber} / ${questions.length} é¡Œ`;
            const progress = (qNumber - 1) / questions.length * 100;
            progressFill.style.width = `${progress}%`;

            let html = `
                <div class="mb-4">
                    <h2 class="text-xl font-bold mb-4" style="color: var(--primary-color);">
                        Q${qNumber}ï¼š${q.question}
                    </h2>
                    <div id="option-select-group" class="option-group option-group-full space-y-3">
            `;

            const choices = ['A', 'B', 'C', 'D'];
            q.options.forEach((optionText, index) => {
                const choiceLetter = choices[index];
                const isSelected = selectedChoiceValue === choiceLetter ? 'btn-selected' : '';
                html += `
                    <button 
                        type="button" 
                        class="btn btn-option btn-quiz-option ${isSelected}" 
                        data-choice="${choiceLetter}" 
                        onclick="handleOptionSelect(${qNumber}, '${choiceLetter}', '${optionText}', this)">
                        ${choiceLetter}. ${optionText}
                    </button>
                `;
            });

            html += `
                    </div>
                </div>
            `;
            
            questionArea.innerHTML = html;
        }

        /**
         * è™•ç†é¸é …æŒ‰éˆ•é»æ“Š
         * @param {number} qNumber - é¡Œè™Ÿ (1-based)
         * @param {string} choiceLetter - é¸é …å­—æ¯ (A, B, C, D)
         * @param {string} optionText - é¸é …æ–‡å­—å…§å®¹
         * @param {HTMLElement} element - è¢«é»æ“Šçš„æŒ‰éˆ•å…ƒç´ 
         */
        function handleOptionSelect(qNumber, choiceLetter, optionText, element) {
            
            // ç§»é™¤åŒçµ„å…¶ä»–æŒ‰éˆ•çš„ selected æ¨£å¼
            const group = document.getElementById('option-select-group');
            group.querySelectorAll('.btn-quiz-option').forEach(btn => {
                btn.classList.remove('btn-selected');
            });

            // ç‚ºç•¶å‰æŒ‰éˆ•å¢åŠ  selected æ¨£å¼
            element.classList.add('btn-selected');

            // æš«å­˜é¸é …å€¼
            selectedChoiceValue = choiceLetter;
            
            console.log("answer_selected", { 
                question: qNumber, 
                choice: choiceLetter, 
                text: optionText
            });
            
            quizError.classList.add('hidden');
        }

        /**
         * è™•ç†ã€Œä¸‹ä¸€é¡Œã€æŒ‰éˆ•é»æ“Š
         */
        function nextQuestion() {
            // æª¢æŸ¥æ˜¯å¦å·²é¸æ“‡é¸é … (æ›´æ–°éŒ¯èª¤è¨Šæ¯)
            if (!selectedChoiceValue) {
                quizError.textContent = "ä½ å¿˜è¨˜é¸æ“‡å•¦ğŸ‘†";
                quizError.classList.remove('hidden');
                return;
            }
            
            // ç´€éŒ„ç•¶å‰ç­”æ¡ˆåˆ°æ­·å²ç´€éŒ„ä¸­
            const qNumber = currentQuestionIndex + 1;
            const addsCode = scoreMap[qNumber][selectedChoiceValue];
            
            answerHistory[currentQuestionIndex] = { 
                q: qNumber, 
                choice: selectedChoiceValue, 
                scoreCode: addsCode 
            };

            console.log("answer_submitted", { 
                question: qNumber, 
                final_choice: selectedChoiceValue, 
                adds_to: addsCode, 
                history_length: answerHistory.length
            });


            currentQuestionIndex++;
            
            if (currentQuestionIndex < questions.length) {
                console.log("next_question", { to: currentQuestionIndex + 1 });
                // å»¶é²æ¸²æŸ“ä»¥ç¢ºä¿ log é †åº
                setTimeout(renderQuestion, 100); 
            } else {
                // é¡¯ç¤ºæœ€çµ‚é€²åº¦ (100%)
                progressFill.style.width = '100%';
                
                // çµæŸæ¸¬é©—
                console.log("next_question", { to: "Result_Page" });
                setTimeout(showResults, 300); 
            }
        }
        
        /**
         * è™•ç†ã€Œä¸Šä¸€é¡Œã€æŒ‰éˆ•é»æ“Š
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                // renderQuestion æœƒè‡ªå‹•å¾ history ä¸­è¼‰å…¥ç­”æ¡ˆ
                renderQuestion();
                console.log("prev_question", { to: currentQuestionIndex + 1 });
            }
        }

        // ----------------------------------------------------
        // éšæ®µ 3: çµæœé é‚è¼¯
        // ----------------------------------------------------

        /**
         * æ ¹æ“š answerHistory é‡æ–°è¨ˆç®—æœ€çµ‚åˆ†æ•¸
         */
        function calculateResult() {
            let score = { ASC: 0, ARC: 0, ISC: 0, IRN: 0 };
            
            // å¾æ­·å²ç´€éŒ„é‡æ–°è¨ˆç®—åˆ†æ•¸
            answerHistory.forEach(answer => {
                if (answer && answer.scoreCode) {
                    score[answer.scoreCode]++;
                }
            });

            let maxScore = -1;
            let resultType = 'ASC'; // é è¨­å€¼
            
            for (const type in score) {
                if (score[type] > maxScore) {
                    maxScore = score[type];
                    resultType = type;
                }
            }

            console.log("final_result", { type: resultType, scores: score });
            return resultType;
        }

        /**
         * é¡¯ç¤ºæœ€çµ‚çµæœé é¢
         */
        function showResults() {
            quizSection.classList.add('hidden');
            resultSection.classList.remove('hidden');

            const finalType = calculateResult();
            const resultData = personalities[finalType];
            
            document.getElementById('result-greeting').innerHTML = 
                `å—¨ï¼Œ<span style="color: var(--primary-color);">${userInfo.name}</span>ï¼ä½ çš„ç†è²¡äººæ ¼æ˜¯â€”â€”`;

            document.getElementById('result-display-area').innerHTML = `
                <p class="result-code">${finalType}</p>
                <p class="result-name">${resultData.name}</p>
                <span class="result-tagline">${resultData.tagline}</span>

                <div class="text-left mt-6 space-y-4">
                    <!-- æè¿° -->
                    <div class="p-4 border-l-4 border-r-4 rounded-lg" style="border-color: var(--primary-color); background-color: #f0f4ff;">
                        <h4 class="font-bold text-lg mb-2" style="color: var(--primary-dark);">ã€æè¿°ã€‘</h4>
                        <p>${resultData.description}</p>
                    </div>
                    
                    <!-- æŠ•è³‡å»ºè­° -->
                    <div class="p-4 border-l-4 border-r-4 rounded-lg" style="border-color: #10b981; background-color: #e6f7f2;">
                        <h4 class="font-bold text-lg mb-2" style="color: #059669;">ã€æŠ•è³‡å»ºè­°ã€‘</h4>
                        <p>${resultData.advice}</p>
                    </div>
                </div>
            `;
        }
        
        /**
         * è™•ç†ã€Œåˆ†äº«çµæœã€æŒ‰éˆ•é»æ“Šäº‹ä»¶ï¼Œæ”¹ç‚ºè§¸ç™¼ç€è¦½å™¨åˆ—å°åŠŸèƒ½ (å„²å­˜ç‚º PDF)
         */
        function printResult() {
            showTemporaryMessage('è«‹åœ¨å½ˆå‡ºçš„å°è©±æ¡†ä¸­ï¼Œé¸æ“‡ã€Œå„²å­˜ç‚º PDFã€ä»¥è½‰ç™¼æª”æ¡ˆã€‚', '#2563eb');
            // å»¶é²åŸ·è¡Œ printï¼Œç¢ºä¿è¨Šæ¯æ¡†æœ‰è¶³å¤ æ™‚é–“é¡¯ç¤º (å¯é¸ï¼Œä½†èƒ½æå‡é«”é©—)
            setTimeout(() => {
                window.print();
            }, 500);
            
            console.log("print_result_attempt", { action: "Trigger_Browser_Print" });
        }

        /**
         * é¡¯ç¤ºè‡¨æ™‚è¨Šæ¯æ¡† (Toast/Snackbar)
         */
        function showTemporaryMessage(message, color) {
            messageBox.textContent = message;
            messageBox.style.backgroundColor = color;
            messageBox.classList.add('visible');
            
            // è‡ªå‹•éš±è—
            setTimeout(() => {
                messageBox.classList.remove('visible');
            }, 3500);
        }
        
        /**
         * é‡è¨­æ¸¬é©—ç‹€æ…‹ä¸¦å›åˆ°åŸºæœ¬è³‡æ–™é 
         */
        function resetQuiz() {
            // é‡ç½®ç‹€æ…‹
            userInfo = {};
            currentQuestionIndex = 0;
            answerHistory = Array(totalQuestions).fill(null);
            selectedChoiceValue = null;

            // é‡ç½® UI
            document.getElementById('user-name').value = '';
            document.querySelectorAll('#gender-group .btn, #age-group .btn, #experience-group .btn').forEach(btn => {
                btn.classList.remove('btn-selected');
            });
            
            // åˆ‡æ›å›åŸºæœ¬è³‡æ–™é 
            resultSection.classList.add('hidden');
            quizSection.classList.add('hidden');
            infoSection.classList.remove('hidden');

            console.log("quiz_reset", { status: "Back_To_Start" });
        }
        
        // é é¢è¼‰å…¥å®Œæˆæ™‚ï¼Œç¢ºä¿é¡¯ç¤ºç¬¬ä¸€å€‹å€å¡Š
        document.addEventListener('DOMContentLoaded', () => {
            // ç¢ºä¿æ‰€æœ‰å€å¡Šçš„åˆå§‹ç‹€æ…‹æ­£ç¢º
            infoSection.classList.remove('hidden');
            quizSection.classList.add('hidden');
            resultSection.classList.add('hidden');
        });
        
    </script>

</body>
</html>
